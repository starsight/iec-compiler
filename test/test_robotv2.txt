

PROGRAM MAIN
	VAR_INPUT
		IN : INT ;
	END_VAR

    VAR
        RET : INT := 0;
    END_VAR

	VAR_OUTPUT
		OUT1 : INT ;
        OUT2 : INT ;
	END_VAR

	RET := SFUN_SERVO_INPUT_UPDATE(0);

	RET := SFUN_RCMODE_READ(0);

    IF IN = 1 OR RET = 1 THEN
        RET := SFUN_SERVO_POWERON(0);
    ELSE
        RET := SFUN_SERVO_POWEROFF(0);
        RET := SFUN_RCPLC_SERVOFLAG_SET(0);
    END_IF;

    IF RET = 1 THEN
    	RET := SFUN_RCPLC_SERVOFLAG_SET(1);
    	IF RET = 1 THEN
	    	RET := SFUN_INTERP_UPDATE(0);
			RET := SFUN_SERVO_OUTPUT_UPDATE(0);
		END_IF;
	END_IF;

END_PROGRAM


CONFIGURATION MAIN_CONFIG

	RESOURCE RES1 ON CPU1
		VAR_GLOBAL
			W AT %IB0: BYTE := 0;
		END_VAR

		TASK fast(INTERVAL := T#8ms, PRIORITY := 90);

		PROGRAM P1 WITH fast: MAIN(IN := W);


	END_RESOURCE

END_CONFIGURATION
